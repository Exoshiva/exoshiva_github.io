<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXOSHIVA - DEBUG</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            /* WICHTIG: Wir machen den Hintergrund LILA um zu sehen ob HTML lädt */
            background-color: #4b0082; 
        }
        
        canvas {
            width: 100%;
            height: 100%;
            display: block;
            /* Canvas leicht transparent machen, damit wir den lila Hintergrund sehen */
            opacity: 0.8; 
        }

        .content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-family: 'Courier New', Courier, monospace;
            z-index: 50;
            pointer-events: none;
            text-align: center;
            text-shadow: 2px 2px 4px #000000;
        }
        
        h1 { font-size: 3rem; margin: 0; letter-spacing: 5px; text-transform: uppercase; }
        p { margin-top: 10px; opacity: 1; font-weight: bold;}
    </style>
</head>
<body>

    <div class="content">
        <h1>EXOSHIVA</h1>
        <p>Status: DIAGNOSE MODUS</p>
    </div>

    <canvas id="fluid"></canvas>

    <script>
        window.addEventListener('load', function() {
            console.log("--- DIAGNOSE START ---");
            const canvas = document.getElementById('fluid');

            if (!canvas) {
                alert("FEHLER: Canvas Element nicht gefunden!");
                return;
            }

            // WebGL Kontext holen (Mit Fallback und Alert)
            function getWebGLContext(canvas) {
                const params = { alpha: true, depth: false, stencil: false, antialias: false, preserveDrawingBuffer: false };
                
                // Versuch 1: WebGL 2
                let gl = canvas.getContext('webgl2', params);
                if (gl) {
                    console.log("WebGL 2 aktiv.");
                    return { gl: gl, isWebGL2: true };
                }

                // Versuch 2: WebGL 1
                gl = canvas.getContext('webgl', params) || canvas.getContext('experimental-webgl', params);
                if (gl) {
                    console.log("WebGL 1 aktiv (Fallback).");
                    return { gl: gl, isWebGL2: false };
                }
                
                alert("KRITISCHER FEHLER: Dein Browser unterstützt kein WebGL. Die Simulation kann nicht laufen.");
                return null;
            }

            // Initialisierung
            const ctxResult = getWebGLContext(canvas);
            if (!ctxResult) return; // Abbruch

            const gl = ctxResult.gl;
            const isWebGL2 = ctxResult.isWebGL2;

            // Einfacher Test: Canvas grün färben via WebGL
            // Wenn das klappt, ist die Verbindung zur Grafikkarte da.
            gl.clearColor(0.0, 0.5, 0.0, 1.0); // Dunkelgrün
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            console.log("WebGL Clear ausgeführt. Das Canvas sollte jetzt GRÜN sein (oder gemischt mit Lila).");

            // Hier würden wir normalerweise die Engine starten.
            // Aber erst müssen wir wissen, ob du Lila/Grün siehst!
        });
    </script>
</body>
</html>
